---
title: OpenCode 新手指南
date: '2026-02-08'
tags:
  - 软件开发
  - AI编程
  - 效率工具
  - OpenCode
published: true
brief: >-
  OpenCode 是一款开源的 AI 编程代理工具，支持终端、桌面应用和 IDE 扩展。本文详细介绍 OpenCode 的安装配置、核心功能和使用技巧，从初级入门到高级进阶，帮助你快速掌握这款提升编程效率的神器。
---


> 一款开源、免费、支持 75+ 模型提供商的 AI 编程代理，拥有近 100K GitHub stars，让你的终端变成智能编程助手。

## 引言：为什么需要 OpenCode

每天面对重复性编码任务、繁琐的代码审查、复杂的重构工作，你是否想过有一个智能助手能分担这些工作？传统的 AI 编程工具要么价格昂贵，要么隐私堪忧。

OpenCode 的出现改变了这一局面。它是一款**完全开源**的 AI 编程代理，支持在终端、桌面应用和主流 IDE 中使用。最吸引人的是：它支持 75+ 家模型提供商，内置免费模型（如 Kimi K2.5、GLM-4.7、MiniMax M2.1），无需订阅即可使用。

本文将带你全面了解 OpenCode，从安装配置到进阶使用，帮助你快速上手这款效率工具。

## OpenCode 简介

### 什么是 OpenCode

OpenCode 是一个开源的 AI 编程代理（AI Coding Agent），由 **anomalyco** 开发并在 GitHub 开源。它允许开发者通过自然语言与 AI 交互，完成代码编写、重构、调试、审查等任务。

**核心定位**：
- 开源免费，代码透明
- 隐私优先，数据可控
- 终端原生，高效便捷
- 模型灵活，支持多提供商

### 主要特性

| 特性 | 说明 |
|------|------|
| **双模式工作** | Build 模式（全权限编辑）+ Plan 模式（只读规划） |
| **多平台支持** | macOS、Windows（WSL）、Linux |
| **模型丰富** | 支持 75+ 提供商，内置 Kimi K2.5、GLM-4.7、MiniMax M2.1 等免费模型 |
| **工具集** | bash 执行、文件读写、grep 搜索、LSP 诊断等 |
| **上下文感知** | 自动生成 `AGENTS.md`，理解项目结构 |
| **分享协作** | 一键生成会话分享链接 |

### 适用场景

- **快速原型开发**：通过自然语言描述生成代码
- **代码审查与重构**：自动化代码改进建议
- **Bug 修复**：定位问题并提供修复方案
- **技术学习**：解释复杂代码逻辑
- **文档编写**：自动生成代码注释和文档

## 安装与配置

### macOS 安装

**方式一：一键安装脚本（推荐）**

```bash
curl -fsSL https://opencode.ai/install | bash
```

**方式二：Homebrew 安装**

```bash
# 使用官方 tap 获取最新版本
brew install anomalyco/tap/opencode
```

**方式三：npm 安装**

```bash
npm install -g opencode-ai
```

**验证安装**：

```bash
opencode --version
# 输出示例：1.1.53
```

### Windows 安装

**推荐：使用 WSL（Windows Subsystem for Linux）**

WSL（Windows Subsystem for Linux）是 Windows 10/11 的可选功能，**需要手动开启**，不是系统默认自带的。

**第一步：安装 WSL**

以管理员身份打开 PowerShell，执行：

```powershell
wsl --install
```

这会安装默认的 Ubuntu 发行版。安装完成后重启电脑，按提示设置 Ubuntu 用户名和密码。

如果已经安装了 WSL，可以跳过此步骤。

**第二步：在 WSL 中安装 OpenCode**

打开 WSL 终端（在开始菜单搜索 "Ubuntu" 或 "WSL"），然后执行：

```bash
curl -fsSL https://opencode.ai/install | bash
```

**方式二：Chocolatey 安装**

```powershell
choco install opencode
```

**方式三：Scoop 安装**

```powershell
scoop bucket add extras
scoop install extras/opencode
```

**方式四：npm 安装**

```powershell
npm install -g opencode-ai
```

**注意**：Windows 原生支持已完善，桌面应用同样支持 Windows。Bun 安装支持目前正在开发中（预计未来版本提供）。


### Linux 安装

**Arch Linux**：

```bash
paru -S opencode-bin
```

**其他发行版**：

使用通用安装脚本：

```bash
curl -fsSL https://opencode.ai/install | bash
```

或通过 npm：

```bash
npm install -g opencode-ai
```

### 桌面应用安装（BETA）

从官方发布页下载对应平台安装包：

| 平台 | 下载文件 |
|------|----------|
| macOS (Apple Silicon) | opencode-desktop-darwin-aarch64.dmg |
| macOS (Intel) | opencode-desktop-darwin-x64.dmg |
| Windows | opencode-desktop-windows-x64.exe |
| Linux | .deb / .rpm / AppImage |

下载地址：[https://opencode.ai/download](https://opencode.ai/download)

> ⚠️ **注意**：桌面应用目前处于 BETA 阶段，功能可能不如终端版本稳定。


### 启动与初次使用

安装完成后，在终端输入以下命令启动 OpenCode：

```bash
opencode
```

**首次启动流程**：

1. **欢迎界面**：看到 OpenCode 的 TUI（终端用户界面）
2. **模型选择**：首次启动会提示选择 AI 模型
   - 选择标注 **Free** 的免费模型（如 Kimi K2.5、MiniMax M2.1、GLM-4.7）
   - 或选择 `/connect` 配置自己的 API Key 或登录已有账户
3. **开始使用**：进入主界面后，输入 `/help` 查看帮助

**验证安装成功**：

```bash
opencode --version
# 应显示版本号，如：1.1.53
```

**快速测试**：

```bash
# 启动 OpenCode
opencode

# 在界面中输入
你好，OpenCode！
```

如果看到 AI 回复，说明安装成功。

### 配置模型

**使用免费模型（无需 API Key）**：

启动后输入 `/models` 查看可用模型，选择标注 **Free** 的模型（如 Kimi K2.5、GLM-4.7、MiniMax M2.1）。

**连接商业模型**：

```bash
# 方式一：命令行
opencode auth login

# 方式二：TUI 中输入
/connect
```

按提示选择提供商（OpenAI、Anthropic、Google 等）并粘贴 API Key。

**使用已有账号登录**：

OpenCode 支持直接登录你已经付费的 AI 服务账号：

- **GitHub Copilot**：输入 `/connect`，选择 GitHub，按提示完成登录
- **ChatGPT Plus/Pro**：输入 `/connect`，选择 OpenAI，登录你的 ChatGPT 账户
- **Claude**：输入 `/connect`，选择 Anthropic，粘贴 API Key

这样可以复用你已经订阅的服务，无需额外付费。

**使用 OpenCode Zen（精选付费模型）**：

Zen 是 OpenCode 官方提供的精选模型服务，为用户测试和优化过最适合编程任务的模型组合，提供稳定可靠的性能：

1. 输入 `/connect`
2. 选择 opencode
3. 访问 [opencode.ai/auth](https://opencode.ai/auth) 注册并充值（首次最低充值 $20）
4. 粘贴 API Key 完成配置

**Zen 特点**：
- 按量计费，无额外加价
- 支持设置每月消费上限
- 模型经过 OpenCode 团队专门测试和优化
- 适合需要高质量模型的开发者

> 💡 **提示**：新手可以先使用免费模型体验，需要更好性能时再考虑使用 Zen。

### 推荐终端工具

OpenCode 在现代化终端中体验更佳：

| 终端 | 平台 | 特点 |
|------|------|------|
| WezTerm | 跨平台 | 功能丰富，配置灵活 |
| Alacritty | 跨平台 | 极速，GPU 加速 |
| Ghostty | Linux/macOS | 新兴，性能优秀 |
| Kitty | Linux/macOS | 功能全面，插件丰富 |

## 核心功能详解

### 双模式工作流

OpenCode 提供两种工作模式，通过 **Tab 键** 切换：

**Build 模式（默认）**
- AI 拥有完整编辑权限
- 可直接修改文件、执行命令
- 适合直接编码任务

**Plan 模式**
- AI 只读，不修改文件
- 提供实施方案和步骤
- 适合规划和审查

**使用建议**：
- 复杂任务先 Plan 后 Build
- 简单任务直接 Build
- 关键代码人工确认后再执行

### 项目初始化

进入项目目录后执行：

```bash
cd /path/to/your/project
opencode
```

在 TUI 中输入：

```bash
/init
```

这会：
- 创建 `.opencode/` 配置目录
- 分析项目结构
- 生成 `AGENTS.md` 项目指南
- 建立代码索引

**建议**：将 `AGENTS.md` 提交到 Git，便于团队协作。

### 内置工具集

OpenCode 通过工具操作代码库，可在 `opencode.json` 中配置权限：

| 工具 | 功能 | 权限选项 |
|------|------|----------|
| **bash** | 执行 shell 命令 | allow/deny/ask |
| **read** | 读取文件内容 | allow |
| **write** | 创建新文件 | allow/ask |
| **edit** | 修改文件内容 | allow/ask |
| **patch** | 应用代码补丁 | allow/ask |
| **grep** | 搜索文件内容 | allow |
| **glob** | 列出匹配文件 | allow |
| **webfetch** | 抓取网页内容 | allow |
| **lsp** | 代码导航和提示 | allow |
| **todo** | 管理任务清单 | allow |

### 常用 Slash 命令

在 TUI 中输入 `/` 查看所有命令：

**核心命令**：

| 命令 | 功能 | 快捷键 |
|------|------|--------|
| `/connect` | 配置模型提供商 | - |
| `/init` | 初始化项目 | Ctrl+X I |
| `/models` | 切换模型 | Ctrl+X M |
| `/new` | 新会话 | Ctrl+X N |
| `/undo` | 撤销更改 | Ctrl+X U |
| `/redo` | 重做更改 | Ctrl+X R |
| `/share` | 分享会话 | Ctrl+X S |
| `/exit` | 退出 | Ctrl+X Q |

### 文件引用语法

使用 `@` 快速引用项目文件：

```
解释 @src/main.ts 中的逻辑
```

支持模糊搜索，输入 `@` 后按文件名自动补全。

## 使用技巧

### 初级：快速上手

**技巧 1：自然语言提问**

直接描述你的需求：

```
当前目录下创建一个登录页面，包含用户名和密码输入框
```

OpenCode 会自动生成所需文件。

**技巧 2：解释代码**

```
@utils.js 中的这个函数是做什么的？
```

**技巧 3：快速修复**

```
修复 @app.py 中的语法错误
```

**技巧 4：查看模型**

```
/models
```

切换不同 AI 模型对比效果。

**技巧 5：撤销操作**

```
/undo
```

需要项目在 Git 管理下才能使用。

### 中级：提升效率

**技巧 6：Plan 模式规划**

复杂任务先用 Plan 模式：

1. 按 `Tab` 切换到 Plan 模式
2. 描述需求：

```
为用户模块添加删除功能：
1. 软删除标记
2. 回收站页面
3. 恢复和永久删除选项
```

3. 审查 AI 的方案
4. 满意后 `Tab` 切回 Build 模式执行

**技巧 7：批量文件操作**

```
将所有 .js 文件中的 var 替换为 const
```

**技巧 8：代码审查**

```
审查 @src/components 目录下的代码，找出潜在问题
```

**技巧 9：添加图片参考**

拖拽图片到终端：

```
按照这个设计图实现页面布局
[图片已添加]
```

**技巧 10：会话管理**

```
/sessions    # 查看所有会话
/new         # 开始新会话
/compact     # 压缩当前会话（总结上下文）
```

### 高级：深度定制

**技巧 11：自定义命令**

创建自定义 Slash 命令：

```bash
mkdir -p ~/.config/opencode/commands
cat > ~/.config/opencode/commands/code-review.md << 'EOF'
---
name: code-review
description: 执行代码审查
type: prompt
---
请审查以下代码，关注：
1. 代码正确性
2. 可读性
3. 性能问题
4. 安全隐患
EOF
```

重启后输入 `/code-review` 使用。

**技巧 12：配置 MCP 服务器**

MCP（Model Context Protocol）扩展工具能力：

在 `opencode.json` 中添加：

```json
{
  "mcpServers": {
    "database": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-postgres"],
      "env": {
        "DATABASE_URL": "postgresql://..."
      }
    }
  }
}
```

**技巧 13：权限精细控制**

编辑 `opencode.json`：

```json
{
  "tools": {
    "bash": {
      "permission": "ask"
    },
    "write": {
      "permission": "ask"
    },
    "edit": {
      "permission": "allow",
      "patterns": ["src/**/*.js"]
    }
  }
}
```

**技巧 14：使用 oh-my-opencode 扩展**

oh-my-opencode 是社区开发的多智能体协作框架，提供更强大的多智能体协作能力。它包含 Sisyphus 等多个专业 Agent，能够自动协调完成复杂任务。

> ⚠️ **安全警告**：oh-my-opencode 是免费开源项目，任何声称"官方"的付费网站都是冒充的。**只从 GitHub 官方仓库下载**：https://github.com/code-yeongyu/oh-my-opencode

**推荐安装方式（让 AI 自动配置）**：

将以下提示词粘贴给你的 AI 助手（如 Claude Code、Cursor）：

```
请帮我安装和配置 oh-my-opencode，按照以下指南操作：
https://raw.githubusercontent.com/code-yeongyu/oh-my-opencode/refs/heads/master/docs/guide/installation.md
```

**手动安装步骤**：

1. 克隆仓库：
```bash
git clone https://github.com/code-yeongyu/oh-my-opencode.git ~/.opencode/oh-my-opencode
```

2. 配置环境变量：
```bash
export OPENCODE_SKILLS_PATH=~/.opencode/oh-my-opencode
```

3. 下载安装脚本：
```bash
curl -fsSL https://raw.githubusercontent.com/code-yeongyu/oh-my-opencode/refs/heads/master/docs/guide/installation.md -o /tmp/oh-my-opencode-install.md
```

4. 查看详细文档：
```bash
cat /tmp/oh-my-opencode-install.md
```

**主要功能**：

- **Sisyphus**：主代理，使用 `ultrawork` 或 `ulw` 关键词触发，自动完成复杂任务
- **Hephaestus**：自主深度工作者，目标导向执行
- **Oracle**：设计和调试专家
- **Librarian**：文档和代码库搜索专家

详细文档和配置说明请访问：https://github.com/code-yeongyu/oh-my-opencode

**使用示例**：

```
ultrawork: 实现一个支持暗黑模式的 React 组件
```

或者简写：

```
ulw: 重构所有 API 路由，添加错误处理
```

**技巧 15：非交互模式脚本化**

适合 CI/CD 和自动化：

```bash
# 单次任务
opencode -p "生成项目 README"

# 指定目录
opencode -c ~/my-project -p "修复 lint 错误"

# JSON 输出
opencode -p "检查代码质量" -f json
```

**技巧 16：自定义主题和快捷键**

```
/theme    # 切换主题
/keybinds # 自定义快捷键
```

**技巧 17：LSP 集成**

启用语言服务器支持代码跳转和诊断：

```
/lsp
```

**技巧 18：导出对话**

```
/export   # 导出为 Markdown
```

便于整理和分享。

**技巧 19：多会话并行**

同时开启多个 OpenCode 实例处理不同任务。

**技巧 20：IDE 集成**

VS Code 安装 OpenCode 扩展，获得无缝体验。

## GitHub Actions 集成

OpenCode 可以直接集成到 GitHub Actions 中，在 PR 和 Issue 中使用 `/opencode` 或 `/oc` 命令触发 AI 自动完成任务。

### 主要功能

- **自动修复 Issue**：在 Issue 中评论 `/opencode fix this`，自动创建分支、修复问题并提交 PR
- **PR 代码审查**：在 PR 中评论，自动审查代码或执行修改
- **定时任务**：通过 cron 定时运行 OpenCode 执行自动化任务
- **代码行级评论**：在 PR 的具体代码行上评论，OpenCode 会理解上下文并响应

### 安装配置

在项目中运行（确保已在 GitHub 仓库目录下）：

```bash
opencode github install
```

这会引导你完成：
1. 安装 OpenCode GitHub App
2. 创建 workflow 文件
3. 配置 API Key

### 使用示例

**自动修复 Bug**：
```
在 GitHub Issue 中评论：
/opencode 这个登录接口偶尔返回 500 错误，请定位并修复
```

**PR 代码修改**：
```
在 PR 中评论：
/opencode 在删除用户时添加软删除逻辑
```

**定时代码审查**：
```yaml
# .github/workflows/opencode-scheduled.yml
name: Weekly Code Review
on:
  schedule:
    - cron: "0 9 * * 1"  # 每周一上午 9 点
jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - uses: anomalyco/opencode/github@latest
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
        with:
          model: anthropic/claude-sonnet-4-20250514
          prompt: |
            审查本周的代码变更，找出潜在问题并提供建议
```

## 实战案例

### 案例 1：快速创建 Node.js API

**步骤**：

1.创建目录：

  ```bash
  mkdir my-api && cd my-api
  npm init -y
  ```

2.启动 OpenCode：

  ```bash
  opencode
  ```

3.初始化项目：

  ```
  /init
  ```

4.描述需求：

  ```
  创建一个 Express.js 服务：
  - /hello 路由返回 JSON { message: 'Hello World' }
  - 添加错误处理中间件
  - 包含 README 使用说明
  ```

5.AI 自动生成代码和文档

### 案例 2：代码重构

**场景**：将回调函数重构为 async/await

```
将 @src/utils.js 中的所有回调函数改为 async/await 风格
```

AI 会：
- 分析文件
- 展示修改计划
- 执行重构
- 验证语法正确性

### 案例 3：Bug 修复流程

**步骤**：

1.描述问题：

```
用户反馈登录接口偶尔返回 500 错误，请定位并修复
```

2.AI 分析相关文件

3.提出修复方案

4.执行修复并测试

## 优缺点分析

### 主要优点

**开源免费**
- 代码完全开源，可审查和定制
- 内置免费模型，零成本入门
- 无订阅费用压力

**隐私可控**
- 本地运行，代码不上传
- 可选择本地模型（Llama、Mistral 等）
- 数据所有权归用户

**模型灵活**
- 75+ 提供商可选
- 支持商业模型和开源模型
- 随时切换对比效果

**终端原生**
- 不离开终端即可完成操作
- 与现有工作流无缝集成
- 响应速度快

**社区活跃**
- 近 100K GitHub stars，704+ 贡献者
- 丰富的插件生态（如 oh-my-opencode）
- 文档完善，更新频繁

### 局限性

**学习曲线**
- 命令行界面需要适应
- 快捷键和命令需要记忆
- 配置相对复杂

**Windows 支持**
- 原生 Windows 支持仍在完善
- 建议配合 WSL 使用
- 部分功能受限

**模型依赖**
- 免费模型能力有限
- 商业模型需要 API Key
- 网络环境影响体验

**IDE 集成**
- 相比 Cursor 等工具，IDE 集成度较低
- 主要依赖终端交互

## 同类工具对比

| 工具 | 类型 | 价格 | 开源 | 特点 |
|------|------|------|------|------|
| **OpenCode** | 终端代理 | 免费（Zen 付费） | ✅ | 开源、模型灵活、75+ 提供商 |
| **Cursor** | IDE | $20/月 | ❌ | 集成度高、体验好 |
| **Claude Code** | 终端代理 | $20-200/月 | ❌ | 功能强大、Claude 模型 |
| **GitHub Copilot** | IDE 插件 | $10/月 | ❌ | 代码补全强 |
| **Codeium** | IDE 插件 | 免费/付费 | ❌ | 免费版可用 |

> 💡 **提示**：Claude Code 价格取决于使用层级，范围为 $20-200/月。

**选择建议**：
- 追求开源免费 → OpenCode + 免费模型（Kimi K2.5、GLM-4.7）
- 追求 IDE 体验 → Cursor
- 追求开箱即用 → Claude Code
- 追求性价比 → OpenCode + Zen 按量付费
- 预算有限 → OpenCode + 免费模型，必要时可复用已有订阅（GitHub Copilot、ChatGPT Plus）

## 总结与建议

### 适合谁使用

**强烈推荐**：
- 终端重度用户
- 注重隐私的开发者
- 希望降低工具成本
- 喜欢开源工具
- 需要灵活配置模型

**可以考虑**：
- 愿意尝试 AI 编程的新手
- 需要快速原型开发
- 希望提升编码效率

### 上手建议

**第一周：熟悉基础**
- 完成安装和配置
- 使用免费模型体验基本功能
- 练习常用命令

**第二周：提高效率**
- 在真实项目中使用
- 掌握 Plan/Build 模式切换
- 尝试自定义配置

**第三周：深度定制**
- 配置 MCP 扩展
- 创建自定义命令
- 尝试 oh-my-opencode 社区插件
- 集成 GitHub Actions 自动化

### 资源链接

- **官网**：[https://opencode.ai](https://opencode.ai)
- **GitHub**：[https://github.com/anomalyco/opencode](https://github.com/anomalyco/opencode)
- **文档**：[https://opencode.ai/docs](https://opencode.ai/docs)
- **Discord 社区**：[https://opencode.ai/discord](https://opencode.ai/discord)
- **下载页面**：[https://opencode.ai/download](https://opencode.ai/download)

## 写在最后

OpenCode 代表了 AI 编程工具的一种新趋势：**开源、自由、可控**。它不试图锁定用户，而是提供灵活的基础设施，让开发者自主选择最适合自己的方案。

在当前 AI 工具动辄月费数十美元的环境下，OpenCode 提供了一条零成本入门的路径。即使使用免费模型，也能显著提升日常编码效率。

如果你正在寻找一款既能保护隐私、又能灵活配置、还不用花钱的 AI 编程工具，OpenCode 值得一试。

毕竟，代码是写给未来的自己看的，而工具是服务于今天的自己的。选择一个合适的 AI 助手，让编程工作更轻松，何乐而不为呢？

---

**快速开始**：

```bash
# 安装
curl -fsSL https://opencode.ai/install | bash

# 启动
opencode

# 初始化项目
/init

# 开始对话
创建一个新功能...
```

祝编码愉快！
