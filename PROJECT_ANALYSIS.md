# é¡¹ç›®åˆ†ææŠ¥å‘Šï¼šè¢æ…å»ºçš„ä¸ªäººåšå®¢

## é¡¹ç›®æ¦‚è§ˆ

| é¡¹ç›®å±æ€§ | è¯¦æƒ… |
|---------|------|
| **é¡¹ç›®åç§°** | personal-blog |
| **é¡¹ç›®ç±»å‹** | Next.js 15 é™æ€åšå®¢ç³»ç»Ÿ |
| **ç‰ˆæœ¬** | 0.1.0 |
| **ä¸»è¦ç”¨é€”** | æŠ€æœ¯åšå®¢å†™ä½œä¸åˆ†äº« |
| **éƒ¨ç½²å¹³å°** | GitHub Pages + Cloudflare CDN |
| **å†…å®¹æ•°é‡** | 42 ç¯‡æŠ€æœ¯æ–‡ç« ï¼Œ4 ä¸ªä¸»é¢˜åˆ†ç±» |
| **åŸŸå** | yuanshenjian.cn |
| **æ„å»ºäº§ç‰©** | ~221 KB (First Load JS) |

### æ ¸å¿ƒå®šä½
ä¸“æ³¨äºæ•æ·å¼€å‘ã€æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰ã€æé™ç¼–ç¨‹ï¼ˆXPï¼‰ç­‰æŠ€æœ¯çŸ¥è¯†åˆ†äº«çš„ä¸ªäººåšå®¢å¹³å°ã€‚é‡‡ç”¨æç®€ç°ä»£è®¾è®¡é£æ ¼ï¼Œæ³¨é‡é˜…è¯»ä½“éªŒå’Œæ€§èƒ½ä¼˜åŒ–ã€‚

### å…³é”®ç»Ÿè®¡æ•°æ®

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| **TypeScript æ–‡ä»¶** | 46 ä¸ª |
| **React ç»„ä»¶** | 26 ä¸ªæ ¸å¿ƒç»„ä»¶ |
| **æ–‡ç« å†…å®¹** | 42 ç¯‡ MDX |
| **ä»£ç æ€»è¡Œæ•°** | ~4000+ è¡Œ |
| **æµ‹è¯•è¦†ç›–ç‡** | 0% |
| **ç”Ÿäº§ä¾èµ–** | 15 ä¸ª |
| **å¼€å‘ä¾èµ–** | 13 ä¸ª |
| **Lighthouse é¢„ä¼°** | Performance: 90+, SEO: 100 |

---

## æŠ€æœ¯æ ˆåˆ†æ

### å‰ç«¯æ¡†æ¶ä¸åº“

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Next.js** | 15.1.6 | React æ¡†æ¶ï¼ŒApp Routerï¼Œé™æ€å¯¼å‡º |
| **React** | 19.0.0 | UI åº“ |
| **TypeScript** | 5.0 | ç±»å‹å®‰å…¨å¼€å‘ |
| **Tailwind CSS** | 3.4.1 | åŸå­åŒ– CSS æ¡†æ¶ |
| **@tailwindcss/typography** | 0.5.19 | Markdown æ’ç‰ˆæ ·å¼ |

### å†…å®¹ç®¡ç†

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **MDX** | 3.1.1 | Markdown + JSX æ··åˆç¼–å†™ |
| **next-mdx-remote** | 5.0.0 | æœåŠ¡ç«¯ MDX æ¸²æŸ“ |
| **gray-matter** | 4.0.3 | Frontmatter è§£æ |
| **remark-gfm** | 4.0.1 | GitHub Flavored Markdown |
| **rehype-prism-plus** | 2.0.1 | ä»£ç è¯­æ³•é«˜äº® |
| **rehype-slug** | 6.0.0 | è‡ªåŠ¨ç”Ÿæˆæ ‡é¢˜é”šç‚¹ |

### å·¥å…·ä¸è¾…åŠ©åº“

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **lucide-react** | 0.563.0 | å›¾æ ‡åº“ |
| **clsx** | 2.1.0 | æ¡ä»¶ç±»åå·¥å…· |
| **tailwind-merge** | 2.2.1 | Tailwind ç±»ååˆå¹¶ |
| **github-slugger** | 2.0.0 | URL å‹å¥½çš„ slug ç”Ÿæˆ |
| **qrcode.react** | 4.2.0 | äºŒç»´ç ç”Ÿæˆ |
| **sharp** | 0.34.5 | å›¾ç‰‡ä¼˜åŒ– |

### æŠ€æœ¯é€‰å‹è¯„ä»·

**âœ… ä¼˜åŠ¿ï¼š**
- **ç°ä»£æŠ€æœ¯æ ˆ**ï¼šé‡‡ç”¨ Next.js 15 + React 19ï¼Œç´§è·Ÿç¤¾åŒºå‰æ²¿
- **TypeScript ä¸¥æ ¼æ¨¡å¼**ï¼šç±»å‹å®‰å…¨ä¿è¯ä»£ç è´¨é‡
- **MDX æ”¯æŒ**ï¼šå†…å®¹åˆ›ä½œçµæ´»ï¼Œå¯åœ¨æ–‡ç« ä¸­åµŒå…¥ React ç»„ä»¶
- **é™æ€å¯¼å‡º**ï¼šSEO å‹å¥½ï¼Œéƒ¨ç½²ç®€å•ï¼Œæ€§èƒ½ä¼˜ç§€
- **Webpack ä¼˜åŒ–**ï¼šè‡ªå®šä¹‰ chunk åˆ†å‰²ç­–ç•¥ï¼Œä¼˜åŒ–åŠ è½½æ€§èƒ½
- **é›¶å¤–éƒ¨çŠ¶æ€ç®¡ç†**ï¼šReact Context + useState è¶³å¤Ÿè½»é‡

**âš ï¸ æ½œåœ¨é—®é¢˜ï¼š**
- React 19 è¾ƒæ–°ï¼Œéƒ¨åˆ†ç¬¬ä¸‰æ–¹åº“å¯èƒ½å°šæœªå®Œå…¨å…¼å®¹
- æœªä½¿ç”¨ next/image å›¾ç‰‡ä¼˜åŒ–ï¼ˆä½¿ç”¨åŸç”Ÿ img æ ‡ç­¾ï¼‰
- æ²¡æœ‰é›†æˆçŠ¶æ€ç®¡ç†åº“ï¼ˆå¯¹äºåšå®¢åœºæ™¯æ˜¯åˆç†çš„ï¼‰

---

## é¡¹ç›®ç»“æ„åˆ†æ

### ç›®å½•ç»“æ„

```
personal-blog/
â”œâ”€â”€ app/                          # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx               # æ ¹å¸ƒå±€ï¼ˆå­—ä½“ã€Providersï¼‰
â”‚   â”œâ”€â”€ page.tsx                 # é¦–é¡µ
â”‚   â”œâ”€â”€ globals.css              # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ articles/                # æ–‡ç« è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ page.tsx             # æ–‡ç« åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ [year]/[month]/[day]/[slug]/  # æ–‡ç« è¯¦æƒ…
â”‚   â”œâ”€â”€ about/                   # å…³äºé¡µé¢
â”‚   â”œâ”€â”€ resume/                  # ç®€å†é¡µé¢
â”‚   â”œâ”€â”€ feed/                    # RSS è®¢é˜…
â”‚   â”œâ”€â”€ sitemap.ts               # SEO Sitemap
â”‚   â”œâ”€â”€ robots.ts                # Robots.txt
â”‚   â”œâ”€â”€ error.tsx                # é”™è¯¯é¡µé¢
â”‚   â””â”€â”€ not-found.tsx            # 404 é¡µé¢
â”œâ”€â”€ components/                   # React ç»„ä»¶ï¼ˆ37 ä¸ªæ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ header.tsx               # ç«™ç‚¹å¯¼èˆª
â”‚   â”œâ”€â”€ footer.tsx               # é¡µè„š
â”‚   â”œâ”€â”€ articles-content.tsx     # æ–‡ç« åˆ—è¡¨
â”‚   â”œâ”€â”€ global-search.tsx        # å…¨å±€æœç´¢ï¼ˆâŒ˜K å¿«æ·é”®ï¼‰
â”‚   â”œâ”€â”€ table-of-contents.tsx    # æ–‡ç« ç›®å½•
â”‚   â”œâ”€â”€ code-block.tsx           # ä»£ç é«˜äº®æ˜¾ç¤º
â”‚   â”œâ”€â”€ giscus-comments.tsx      # Giscus è¯„è®º
â”‚   â”œâ”€â”€ pagination.tsx           # åˆ†é¡µç»„ä»¶ï¼ˆLink ç‰ˆæœ¬ï¼‰
â”‚   â”œâ”€â”€ pagination-nav.tsx       # åˆ†é¡µç»„ä»¶ï¼ˆButton ç‰ˆæœ¬ï¼‰
â”‚   â”œâ”€â”€ theme-*.tsx              # ä¸»é¢˜ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ resume/                  # ç®€å†ç›¸å…³ç»„ä»¶ï¼ˆ8 ä¸ªï¼‰
â”‚   â””â”€â”€ ...                      # å…¶ä»–å·¥å…·ç»„ä»¶
â”œâ”€â”€ lib/                          # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ blog.ts                  # åšå®¢æ•°æ®é€»è¾‘ï¼ˆ304 è¡Œï¼‰
â”‚   â”œâ”€â”€ mdx.tsx                  # MDX æ¸²æŸ“ï¼ˆ140 è¡Œï¼‰
â”‚   â”œâ”€â”€ config.ts                # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ utils.ts                 # å·¥å…·å‡½æ•°
â”œâ”€â”€ content/blog/                 # MDX æ–‡ç« å†…å®¹ï¼ˆ42 ç¯‡ï¼‰
â”‚   â”œâ”€â”€ agile/                   # æ•æ·å¼€å‘ï¼ˆ8 ç¯‡ï¼‰
â”‚   â”‚   â””â”€â”€ coaching/
â”‚   â”œâ”€â”€ career/                  # èŒä¸šå‘å±•ï¼ˆ12 ç¯‡ï¼‰
â”‚   â”œâ”€â”€ oo/                      # é¢å‘å¯¹è±¡ï¼ˆ4 ç¯‡ï¼‰
â”‚   â””â”€â”€ xp/                      # æé™ç¼–ç¨‹ï¼ˆ18 ç¯‡ï¼‰
â”‚       â”œâ”€â”€ tdd/                 # æµ‹è¯•é©±åŠ¨å¼€å‘
â”‚       â”œâ”€â”€ testing/             # æµ‹è¯•ç­–ç•¥
â”‚       â”œâ”€â”€ simple-design/       # ç®€å•è®¾è®¡
â”‚       â””â”€â”€ refactoring/         # ä»£ç é‡æ„
â”œâ”€â”€ public/                       # é™æ€èµ„æº
â”‚   â”œâ”€â”€ icons/                   # PWA å›¾æ ‡ï¼ˆ9 ä¸ªå°ºå¯¸ï¼‰
â”‚   â”œâ”€â”€ images/                  # æ–‡ç« å›¾ç‰‡
â”‚   â”œâ”€â”€ docs/                    # æ–‡æ¡£èµ„æºï¼ˆç®€å† PDFï¼‰
â”‚   â”œâ”€â”€ sw.js                    # Service Worker
â”‚   â””â”€â”€ manifest.json            # PWA é…ç½®
â”œâ”€â”€ types/                        # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ blog.ts                  # åšå®¢ç›¸å…³ç±»å‹ï¼ˆ31 è¡Œï¼‰
â”œâ”€â”€ scripts/                      # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ optimize-images.js       # å›¾ç‰‡ä¼˜åŒ–ï¼ˆæ„å»ºæ—¶ï¼‰
â”‚   â”œâ”€â”€ check-images.js          # å›¾ç‰‡å¼•ç”¨æ£€æŸ¥
â”‚   â”œâ”€â”€ extract-excerpts.js      # æ‰¹é‡æå–æ‘˜è¦
â”‚   â””â”€â”€ pwa/                     # PWA ç›¸å…³è„šæœ¬
â”œâ”€â”€ .github/workflows/            # GitHub Actions
â”‚   â””â”€â”€ deploy.yml               # è‡ªåŠ¨éƒ¨ç½²é…ç½®
â””â”€â”€ é…ç½®æ–‡ä»¶ï¼ˆnext.config.ts, tailwind.config.ts, tsconfig.json, etc.ï¼‰
```

### æ¶æ„è®¾è®¡è¯„ä¼°

**âœ… ä¼˜ç‚¹ï¼š**

1. **æ¸…æ™°çš„åˆ†å±‚æ¶æ„**
   - `app/`: è·¯ç”±å’Œé¡µé¢ï¼ˆNext.js App Routerï¼‰
   - `components/`: å¯å¤ç”¨ UI ç»„ä»¶
   - `lib/`: ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®å¤„ç†
   - `types/`: ç±»å‹å®šä¹‰ç‹¬ç«‹ç®¡ç†

2. **å†…å®¹ç»„ç»‡åˆç†**
   - æ–‡ç« æŒ‰ä¸»é¢˜åˆ†ç±»å­˜æ”¾ï¼ˆagile/, career/, oo/, xp/ï¼‰
   - æ”¯æŒå¤šçº§ç›®å½•ç»“æ„ï¼ˆå¦‚ xp/tdd/, xp/testing/ï¼‰
   - æ¸…æ™°çš„æ–‡ä»¶å‘½åè§„èŒƒï¼ˆkebab-caseï¼‰

3. **ç»„ä»¶èŒè´£åˆ†æ˜**
   - æœåŠ¡ç«¯ç»„ä»¶ï¼ˆServer Componentsï¼‰ä¸å®¢æˆ·ç«¯ç»„ä»¶ï¼ˆClient Componentsï¼‰åˆ†ç¦»
   - ç»„ä»¶ç²’åº¦é€‚ä¸­ï¼Œæ˜“äºç»´æŠ¤
   - å¤ç”¨æ€§é«˜ï¼ˆå¦‚åˆ†é¡µç»„ä»¶æä¾›ä¸¤ç§æ¨¡å¼ï¼‰

4. **æ•°æ®æµæ¸…æ™°**
   - æ„å»ºæ—¶ä»æ–‡ä»¶ç³»ç»Ÿè¯»å– MDX æ–‡ä»¶
   - ä½¿ç”¨ç¼“å­˜ä¼˜åŒ–æ„å»ºæ€§èƒ½
   - å®¢æˆ·ç«¯çŠ¶æ€ç®¡ç†ç®€å•ç›´æ¥

**âš ï¸ æ”¹è¿›ç©ºé—´ï¼š**

1. **ç¼ºå°‘ç»Ÿä¸€çš„ API å±‚**
   - æ•°æ®è·å–é€»è¾‘ç›´æ¥åˆ†å¸ƒåœ¨ lib/blog.ts ä¸­
   - å¯è€ƒè™‘æŠ½è±¡æ•°æ®è®¿é—®å±‚

2. **ç»„ä»¶ç›®å½•å¯è¿›ä¸€æ­¥ä¼˜åŒ–**
   - ç›®å‰æ‰€æœ‰ç»„ä»¶å¹³é“ºåœ¨ components/ ä¸‹
   - å»ºè®®æŒ‰åŠŸèƒ½åŸŸç»„ç»‡ï¼ˆå¦‚ ui/, features/, layouts/ï¼‰

3. **ç¼ºå°‘æµ‹è¯•ç›®å½•**
   - æ²¡æœ‰ __tests__/ æˆ– tests/ ç›®å½•
   - AGENTS.md ä¸­æåˆ°å¾…æ·»åŠ å•å…ƒæµ‹è¯•å’Œ E2E æµ‹è¯•

---

## ä»£ç è´¨é‡è¯„ä¼°

### TypeScript ä½¿ç”¨æƒ…å†µ

**âœ… ä¼˜ç§€å®è·µï¼š**

1. **ä¸¥æ ¼æ¨¡å¼å¯ç”¨**
   ```json
   // tsconfig.json
   "strict": true,
   "noEmit": true,
   "isolatedModules": true
   ```

2. **ç±»å‹å®šä¹‰å®Œæ•´**
   - `types/blog.ts` å®šä¹‰äº†æ ¸å¿ƒæ•°æ®ç±»å‹ï¼ˆPost, PostMetadata, PostFrontmatterï¼‰
   - Props ä½¿ç”¨ interface å®šä¹‰
   - è”åˆç±»å‹ä½¿ç”¨ type å®šä¹‰

3. **è·¯å¾„åˆ«åé…ç½®**
   ```json
   "paths": {
     "@/*": ["./*"]
   }
   ```

4. **ç±»å‹å®ˆå«ä¼˜äºç±»å‹æ–­è¨€**
   ```typescript
   // blog.ts
   posts.filter((post): post is Post => post !== null && post.published)
   ```

**âš ï¸ æ½œåœ¨é—®é¢˜ï¼š**

1. **éƒ¨åˆ†ç»„ä»¶ç¼ºå°‘æ˜¾å¼è¿”å›ç±»å‹**
   - å¤§å¤šæ•°ç»„ä»¶ä¾èµ– TypeScript æ¨æ–­
   - å»ºè®®æ˜¾å¼å£°æ˜è¿”å›ç±»å‹ä»¥æé«˜å¯è¯»æ€§

2. **any ç±»å‹è­¦å‘Š**
   ```typescript
   // mdx.tsx
   export type MDXComponents = Record<string, React.FC<Record<string, unknown>>>;
   // ä½¿ç”¨äº† unknown è€Œé anyï¼Œè¾ƒå¥½
   ```

### ä»£ç è§„èŒƒå’Œé£æ ¼

**âœ… è‰¯å¥½å®è·µï¼š**

1. **ESLint é…ç½®åˆç†**
   ```json
   {
     "extends": ["next/core-web-vitals", "next/typescript"],
     "rules": {
       "@typescript-eslint/no-explicit-any": "warn",
       "@typescript-eslint/no-unused-vars": ["warn", { "argsIgnorePattern": "^_" }],
       "prefer-const": "warn",
       "no-console": ["warn", { "allow": ["warn", "error"] }]
     }
   }
   ```

2. **å‘½åè§„èŒƒç»Ÿä¸€**
   - ç»„ä»¶ï¼šPascalCaseï¼ˆHeader, ArticleContentï¼‰
   - æ–‡ä»¶ï¼šç»„ä»¶ç”¨ PascalCaseï¼Œå…¶ä»–ç”¨ kebab-case
   - å˜é‡/å‡½æ•°ï¼šcamelCase
   - å¸¸é‡ï¼šUPPER_SNAKE_CASE

3. **å¯¼å…¥é¡ºåºè§„èŒƒ**
   ```typescript
   // å¤–éƒ¨æ¨¡å— â†’ ç»å¯¹è·¯å¾„ â†’ ç›¸å¯¹è·¯å¾„
   import React from 'react';
   import Link from "next/link";
   import { getAllPosts } from "@/lib/blog";
   ```

**âš ï¸ æ”¹è¿›ç‚¹ï¼š**

1. **éƒ¨åˆ†æ–‡ä»¶è¿‡é•¿**
   - `blog.ts` 304 è¡Œï¼ŒåŠŸèƒ½è¾ƒå¤š
   - å»ºè®®æ‹†åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼ˆå¦‚ post.ts, tag.ts, category.tsï¼‰

2. **æ³¨é‡Šä¸å¤Ÿå……åˆ†**
   - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ç¼ºå°‘ JSDoc æ³¨é‡Š
   - å¤æ‚çš„å‡½æ•°ç¼ºå°‘è¯´æ˜

### é”™è¯¯å¤„ç†æ¨¡å¼

**âœ… ä¼˜ç‚¹ï¼š**

1. **æœåŠ¡ç«¯ç»„ä»¶ä½¿ç”¨ notFound()**
   ```typescript
   // app/articles/[...]/page.tsx
   if (!post) {
     notFound();
   }
   ```

2. **æ–‡ä»¶è¯»å–é”™è¯¯å¤„ç†å®Œå–„**
   ```typescript
   // blog.ts
   try {
     const items = fs.readdirSync(dir);
   } catch (dirError) {
     console.error(`[Blog] Failed to read directory ${dir}:`, ...);
   }
   ```

3. **ä¼˜é›…é™çº§**
   - å•ä¸ªæ–‡ä»¶è§£æå¤±è´¥ä¸å½±å“å…¶ä»–æ–‡ä»¶
   - ä½¿ç”¨ `console.warn` è®°å½•éè‡´å‘½é”™è¯¯

**âš ï¸ ä¸è¶³ï¼š**

1. **ç¼ºå°‘å…¨å±€é”™è¯¯è¾¹ç•Œ**
   - è™½ç„¶æœ‰ error.tsxï¼Œä½†ç²’åº¦è¾ƒç²—
   - å»ºè®®æ·»åŠ æ›´ç»†ç²’åº¦çš„é”™è¯¯å¤„ç†

2. **å®¢æˆ·ç«¯é”™è¯¯å¤„ç†ä¸å¤Ÿ**
   - æœç´¢ç»„ä»¶ç­‰ç¼ºå°‘ try-catch
   - API è°ƒç”¨ç¼ºå°‘é”™è¯¯é‡è¯•æœºåˆ¶

### æ€§èƒ½ä¼˜åŒ–

**âœ… å·²å®ç°ï¼š**

1. **æ•°æ®ç¼“å­˜**
   ```typescript
   // blog.ts
   let cachedPosts: Post[] | null = null;
   if (cachedPosts && process.env.NODE_ENV === 'production') {
     return cachedPosts;
   }
   ```

2. **Webpack Chunk åˆ†å‰²**
   ```typescript
   // next.config.ts
   splitChunks: {
     cacheGroups: {
       vendor: { test: /[\\/]node_modules[\\/](react|react-dom|next)[\\/]/ },
       mdx: { test: /[\\/]node_modules[\\/](@mdx-js|next-mdx-remote|remark|rehype|unified)[\\/]/ }
     }
   }
   ```

3. **å›¾ç‰‡ä¼˜åŒ–**
   - æ„å»ºæ—¶è‡ªåŠ¨è½¬æ¢ WebP æ ¼å¼
   - ä½¿ç”¨ sharp åº“å¤„ç†

4. **å­—ä½“ä¼˜åŒ–**
   ```typescript
   const inter = Inter({
     display: "swap", // é¿å…å­—ä½“åŠ è½½é˜»å¡æ¸²æŸ“
     preload: true,
   });
   ```

5. **PWA æ”¯æŒ**
   - Service Worker ç¼“å­˜
   - ç¦»çº¿è®¿é—®æ”¯æŒ

**âš ï¸ å¾…ä¼˜åŒ–ï¼š**

1. **å›¾ç‰‡åŠ è½½ä¼˜åŒ–**
   - ä½¿ç”¨åŸç”Ÿ `<img>` è€Œé Next.js `<Image />`
   - ç¼ºå°‘æ‡’åŠ è½½å’Œå“åº”å¼å›¾ç‰‡

2. **ä»£ç åˆ†å‰²**
   - éƒ¨åˆ†é¡µé¢ç»„ä»¶è¾ƒå¤§ï¼Œå¯è¿›ä¸€æ­¥æ‹†åˆ†

3. **é¦–å±åŠ è½½**
   - å¯è€ƒè™‘æ·»åŠ éª¨æ¶å±

---

## åŠŸèƒ½å®Œæ•´æ€§åˆ†æ

### å·²å®ç°åŠŸèƒ½

| åŠŸèƒ½æ¨¡å— | å®ç°çŠ¶æ€ | è´¨é‡è¯„åˆ† | è¯´æ˜ |
|---------|---------|---------|------|
| **æ–‡ç« å±•ç¤º** | âœ… å®Œæ•´ | â­â­â­â­â­ | MDX æ¸²æŸ“ã€ä»£ç é«˜äº®ã€ç›®å½•ç”Ÿæˆã€JSON-LD |
| **æ–‡ç« åˆ—è¡¨** | âœ… å®Œæ•´ | â­â­â­â­â­ | åˆ†é¡µã€æ ‡ç­¾ç­›é€‰ã€é˜…è¯»æ—¶é—´è®¡ç®—ã€RSS |
| **å…¨å±€æœç´¢** | âœ… å®Œæ•´ | â­â­â­â­â­ | âŒ˜K å¿«æ·é”®ã€é”®ç›˜å¯¼èˆªã€å®æ—¶è¿‡æ»¤ |
| **è¯„è®ºç³»ç»Ÿ** | âœ… å®Œæ•´ | â­â­â­â­ | Giscus é›†æˆï¼ŒåŸºäº GitHub Discussions |
| **ä¸»é¢˜åˆ‡æ¢** | âœ… å®Œæ•´ | â­â­â­â­â­ | æ˜æš—æ¨¡å¼ã€ç³»ç»Ÿåå¥½æ£€æµ‹ã€æœ¬åœ°å­˜å‚¨ |
| **å“åº”å¼è®¾è®¡** | âœ… å®Œæ•´ | â­â­â­â­â­ | ç§»åŠ¨ç«¯/å¹³æ¿/æ¡Œé¢ç«¯å®Œç¾é€‚é… |
| **SEO ä¼˜åŒ–** | âœ… å®Œæ•´ | â­â­â­â­â­ | Sitemapã€robots.txtã€Open Graphã€ç»“æ„åŒ–æ•°æ® |
| **RSS è®¢é˜…** | âœ… å®Œæ•´ | â­â­â­â­ | feed/route.ts |
| **PWA æ”¯æŒ** | âœ… å®Œæ•´ | â­â­â­â­ | Manifestã€Service Workerã€ç¦»çº¿è®¿é—® |
| **ä»£ç é«˜äº®** | âœ… å®Œæ•´ | â­â­â­â­ | Prism Plus è¯­æ³•é«˜äº® |
| **ç¤¾äº¤åˆ†äº«** | âœ… å®Œæ•´ | â­â­â­ | å¾®ä¿¡ã€Twitterã€å¤åˆ¶é“¾æ¥ã€äºŒç»´ç  |
| **é˜…è¯»è¿›åº¦** | âœ… å®Œæ•´ | â­â­â­â­ | é¡¶éƒ¨è¿›åº¦æ¡ |
| **è¿”å›é¡¶éƒ¨** | âœ… å®Œæ•´ | â­â­â­â­ | BackToTop ç»„ä»¶ |
| **æ–‡ç« å¯¼èˆª** | âœ… å®Œæ•´ | â­â­â­â­â­ | ä¸Šä¸€ç¯‡/ä¸‹ä¸€ç¯‡ã€ç›®å½•æµ®åŠ¨æŒ‰é’® |
| **ç®€å†é¡µé¢** | âœ… å®Œæ•´ | â­â­â­â­ | ç‹¬ç«‹ç®€å†å±•ç¤º |
| **å…³äºé¡µé¢** | âœ… å®Œæ•´ | â­â­â­ | ä¸ªäººä»‹ç» |
| **é”™è¯¯å¤„ç†** | âœ… å®Œæ•´ | â­â­â­â­ | error.tsxã€not-found.tsx |

### ç¼ºå¤±æˆ–å¾…å®ç°åŠŸèƒ½

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | å½±å“ | è¯´æ˜ |
|------|-------|------|------|
| **å•å…ƒæµ‹è¯•** | ğŸ”´ é«˜ | é«˜ | AGENTS.md ä¸­æåˆ°å¾…æ·»åŠ  Vitest |
| **E2E æµ‹è¯•** | ğŸ”´ é«˜ | é«˜ | AGENTS.md ä¸­æåˆ°å¾…æ·»åŠ  Playwright |
| **è¿è¡Œæ—¶å›¾ç‰‡ä¼˜åŒ–** | ğŸ”´ é«˜ | ä¸­ | å“åº”å¼å›¾ç‰‡ã€æ‡’åŠ è½½ |
| **Bundle ç›‘æ§** | ğŸŸ¡ ä¸­ | ä¸­ | AGENTS.md ä¸­æåˆ° |
| **ç¼“å­˜ç­–ç•¥ä¼˜åŒ–** | ğŸŸ¡ ä¸­ | ä½ | é™æ€èµ„æºç¼“å­˜å¤´ |
| **æœç´¢ç´¢å¼•** | ğŸŸ¡ ä¸­ | ä¸­ | Fuse.js æˆ–æ„å»ºæ—¶ç´¢å¼• |
| **æ–‡ç« ç³»åˆ—/ä¸“é¢˜** | ğŸŸ¡ ä¸­ | ä½ | æ·»åŠ  `series` frontmatter |
| **åˆ†ç±»é¡µé¢** | ğŸŸ¡ ä¸­ | ä½ | ç‹¬ç«‹åˆ†ç±»å±•ç¤ºé¡µ |
| **æ–‡ç« è‰ç¨¿åŠŸèƒ½** | ğŸŸ¢ ä½ | ä½ | published å­—æ®µå·²æ”¯æŒ |
| **é˜…è¯»é‡ç»Ÿè®¡** | ğŸŸ¢ ä½ | ä½ | éœ€åç«¯æ”¯æŒ |
| **ç›¸å…³æ–‡ç« æ¨è** | ğŸŸ¢ ä½ | ä½ | åŸºäºæ ‡ç­¾ç›¸ä¼¼åº¦ |
| **åˆ†æå·¥å…·** | ğŸŸ¢ ä½ | ä½ | Google Analytics æˆ– Plausible |

---

## å®‰å…¨å®è·µè¯„ä¼°

**âœ… è‰¯å¥½å®è·µï¼š**

1. **ç¯å¢ƒå˜é‡ç®¡ç†**
   ```bash
   # .env.example æä¾›æ¨¡æ¿
   # .env.local åœ¨ .gitignore ä¸­å¿½ç•¥
   ```

2. **XSS é˜²æŠ¤**
   - MDX å†…å®¹ç»è¿‡è½¬ä¹‰å¤„ç†
   - React è‡ªåŠ¨è½¬ä¹‰ JSX

3. **ä¾èµ–å®‰å…¨**
   - ä½¿ç”¨ npm audit æ£€æŸ¥
   - å®šæœŸæ›´æ–°ä¾èµ–

**âš ï¸ æ³¨æ„äº‹é¡¹ï¼š**

1. **æ–‡ä»¶ç³»ç»Ÿæ“ä½œ**
   - blog.ts ä¸­ä½¿ç”¨ fs è¯»å–æ–‡ä»¶ï¼Œéœ€æ³¨æ„è·¯å¾„å®‰å…¨
   - ç›®å‰é€šè¿‡ path.join(process.cwd(), ...) é™åˆ¶èŒƒå›´

2. **ç”¨æˆ·è¾“å…¥å¤„ç†**
   - æœç´¢åŠŸèƒ½ç¼ºå°‘è¾“å…¥è¿‡æ»¤
   - URL å‚æ•°æœªåšä¸¥æ ¼æ ¡éªŒ

---

## å¯è®¿é—®æ€§ï¼ˆA11yï¼‰è¯„ä¼°

**âœ… å·²å®ç°ï¼š**

1. **è¯­ä¹‰åŒ– HTML**
   - ä½¿ç”¨ `<main>`, `<article>`, `<header>`, `<footer>` ç­‰æ ‡ç­¾
   - æ ‡é¢˜å±‚çº§åˆç†ï¼ˆh1 â†’ h6ï¼‰

2. **ARIA å±æ€§**
   ```typescript
   // global-search.tsx
   aria-label="æ‰“å¼€æœç´¢"
   aria-controls="search-results"
   aria-activedescendant={...}
   ```

3. **é”®ç›˜å¯¼èˆª**
   - å…¨å±€æœç´¢æ”¯æŒ âŒ˜K å¿«æ·é”®
   - æœç´¢ç»“æœæ”¯æŒä¸Šä¸‹ç®­å¤´é€‰æ‹©

4. **ç„¦ç‚¹ç®¡ç†**
   ```css
   :focus-visible {
     @apply outline-none ring-2 ring-ring ring-offset-2 ring-offset-background;
   }
   ```

5. **é¢œè‰²å¯¹æ¯”åº¦**
   - æ˜æš—ä¸»é¢˜éƒ½ç»è¿‡è®¾è®¡
   - æ–‡å­—ä¸èƒŒæ™¯å¯¹æ¯”åº¦å……è¶³

**âš ï¸ æ”¹è¿›ç©ºé—´ï¼š**

1. **è·³è½¬åˆ°å†…å®¹é“¾æ¥**
   - ç¼ºå°‘ "Skip to main content" é“¾æ¥

2. **å›¾ç‰‡ Alt æ–‡æœ¬**
   - éƒ¨åˆ†å›¾ç‰‡ç¼ºå°‘æè¿°æ€§ alt æ–‡æœ¬

3. **è¡¨å•æ ‡ç­¾**
   - æœç´¢è¾“å…¥æ¡†ç¼ºå°‘æ˜¾å¼ label

---

## SEO ä¼˜åŒ–è¯„ä¼°

**âœ… ä¼˜ç§€å®è·µï¼š**

1. **Meta æ ‡ç­¾å®Œå–„**
   ```typescript
   // layout.tsx
   export const metadata: Metadata = {
     title: "...",
     description: "...",
     manifest: "/manifest.json",
     // ...
   };
   ```

2. **åŠ¨æ€ Sitemap**
   ```typescript
   // app/sitemap.ts
   export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
     // è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰æ–‡ç«  URL
   }
   ```

3. **ç»“æ„åŒ– URL**
   - `/articles/2024/08/05/article-slug`
   - è¯­ä¹‰æ¸…æ™°ï¼Œåˆ©äº SEO

4. **Open Graph æ”¯æŒ**
   - æ–‡ç« é¡µé¢ç”Ÿæˆ OG æ ‡ç­¾
   - æ”¯æŒç¤¾äº¤åˆ†äº«å¡ç‰‡

5. **é™æ€å¯¼å‡º**
   - è¾“å‡ºé™æ€ HTMLï¼Œæœç´¢å¼•æ“å‹å¥½
   - é¦–å±åŠ è½½å¿«

---

## é¡¹ç›®å¾…æ”¹è¿›å»ºè®®

### ğŸ”´ é«˜ä¼˜å…ˆçº§

#### 1. æ·»åŠ å•å…ƒæµ‹è¯•ï¼ˆVitestï¼‰

**é—®é¢˜æè¿°**ï¼šé¡¹ç›®ç›®å‰æ²¡æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä»£ç è´¨é‡å’ŒåŠŸèƒ½ç¨³å®šæ€§éš¾ä»¥ä¿è¯ã€‚

**å½±å“**ï¼š
- ä»£ç é‡æ„é£é™©é«˜
- æ–°åŠŸèƒ½å¼€å‘å®¹æ˜“å¼•å…¥å›å½’ bug
- ä»£ç å®¡æŸ¥ä¾èµ–äººå·¥
- æ— æ³• CI/CD ä¸­è‡ªåŠ¨éªŒè¯

**å»ºè®®æ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£…ä¾èµ–
npm install -D vitest @testing-library/react @testing-library/jest-dom jsdom @vitest/coverage-v8

# åˆ›å»º vitest.config.ts
import { defineConfig } from 'vitest/config';

export default defineConfig({
  test: {
    environment: 'jsdom',
    globals: true,
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html'],
      exclude: ['node_modules/', '.next/', 'dist/'],
    },
  },
});

# æµ‹è¯•æ–‡ä»¶ç»“æ„
lib/__tests__/blog.test.ts
lib/__tests__/utils.test.ts
components/__tests__/theme-toggle.test.tsx
```

**å…·ä½“æµ‹è¯•ç”¨ä¾‹å»ºè®®**ï¼š
- `lib/blog.ts`: æµ‹è¯•æ–‡ç« è§£æã€ç¼“å­˜æœºåˆ¶ã€åˆ†é¡µé€»è¾‘
- `lib/utils.ts`: æµ‹è¯• `cn()` å‡½æ•°ã€`cleanContent()` å‡½æ•°
- `components/theme-toggle.tsx`: æµ‹è¯•ä¸»é¢˜åˆ‡æ¢é€»è¾‘

**é¢„æœŸç›®æ ‡**ï¼šæ ¸å¿ƒé€»è¾‘è¦†ç›–ç‡ 80%+

**ä¼˜å…ˆçº§**ï¼šğŸ”´ é«˜

---

#### 2. æ·»åŠ  E2E æµ‹è¯•ï¼ˆPlaywrightï¼‰

**é—®é¢˜æè¿°**ï¼šæ²¡æœ‰ç«¯åˆ°ç«¯æµ‹è¯•ï¼Œæ— æ³•éªŒè¯å®Œæ•´çš„ç”¨æˆ·æµç¨‹ã€‚

**å½±å“**ï¼š
- éƒ¨ç½²åå¯èƒ½å‘ç°çº¿ä¸Šé—®é¢˜
- æ‰‹åŠ¨æµ‹è¯•è€—æ—¶
- å›å½’æµ‹è¯•æˆæœ¬é«˜

**å»ºè®®æ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£… Playwright
npm install -D @playwright/test
npx playwright install

# åˆ›å»º playwright.config.ts
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './e2e',
  projects: [
    { name: 'chromium', use: { ...devices['Desktop Chrome'] } },
    { name: 'Mobile Safari', use: { ...devices['iPhone 12'] } },
  ],
  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:3000',
  },
});
```

**æµ‹è¯•åœºæ™¯**ï¼š
1. é¦–é¡µåŠ è½½å’Œå¯¼èˆª
2. æ–‡ç« åˆ—è¡¨åˆ†é¡µå’Œæ ‡ç­¾ç­›é€‰
3. æ–‡ç« è¯¦æƒ…é¡µæ¸²æŸ“å’Œç›®å½•
4. å…¨å±€æœç´¢åŠŸèƒ½ï¼ˆâŒ˜Kï¼‰
5. ä¸»é¢˜åˆ‡æ¢ï¼ˆæ˜æš—æ¨¡å¼ï¼‰
6. ç§»åŠ¨ç«¯å“åº”å¼å¸ƒå±€
7. PWA Service Worker æ³¨å†Œ

**ä¼˜å…ˆçº§**ï¼šğŸ”´ é«˜

---

#### 3. ä¼˜åŒ–æ–‡ç« æŸ¥æ‰¾æ€§èƒ½

**é—®é¢˜æè¿°**ï¼š`getPostByDateAndSlug()` ä½¿ç”¨çº¿æ€§æŸ¥æ‰¾ O(n)ï¼Œæ–‡ç« æ•°é‡å¢åŠ æ—¶æ€§èƒ½ä¸‹é™ã€‚

**å½±å“**ï¼š
- æ„å»ºæ—¶é—´éšæ–‡ç« æ•°é‡çº¿æ€§å¢é•¿
- å¤§ç«™ç‚¹æ—¶æ€§èƒ½é—®é¢˜æ˜æ˜¾

**å»ºè®®æ–¹æ¡ˆ**ï¼š
```typescript
// lib/blog.ts
// ä½¿ç”¨ Map ç¼“å­˜ slug -> post æ˜ å°„
let postMap: Map<string, Post> | null = null;

function buildPostMap(): Map<string, Post> {
  if (postMap) return postMap;
  
  const posts = getAllPosts();
  postMap = new Map();
  
  posts.forEach(post => {
    const key = `${post.year}/${post.month}/${post.day}/${post.slug}`;
    postMap!.set(key, post);
  });
  
  return postMap;
}

export function getPostByDateAndSlug(
  year: string, 
  month: string, 
  day: string, 
  slug: string
): Post | null {
  const map = buildPostMap();
  const key = `${year}/${month}/${day}/${slug}`;
  return map.get(key) || null;
}
```

**æ€§èƒ½æå‡**ï¼šO(n) â†’ O(1)

**ä¼˜å…ˆçº§**ï¼šğŸ”´ é«˜

---

#### 4. å›¾ç‰‡è¿è¡Œæ—¶ä¼˜åŒ–

**é—®é¢˜æè¿°**ï¼šç›®å‰ä½¿ç”¨åŸç”Ÿ `<img>` æ ‡ç­¾ï¼Œç¼ºå°‘æ‡’åŠ è½½å’Œå“åº”å¼ä¼˜åŒ–ã€‚æ„å»ºæ—¶ä»…è½¬æ¢æ ¼å¼ï¼Œæœªç”Ÿæˆå¤šå°ºå¯¸ã€‚

**å½±å“**ï¼š
- é¦–å±åŠ è½½æ…¢
- ç§»åŠ¨ç«¯æµé‡æ¶ˆè€—å¤§
- Lighthouse æ€§èƒ½è¯„åˆ†å—å½±å“

**å»ºè®®æ–¹æ¡ˆ**ï¼š

**æ–¹æ¡ˆ A - ä½¿ç”¨ Next.js Imageï¼ˆæ¨èï¼‰**ï¼š
```typescript
// éœ€è¦ä¿®æ”¹ next.config.ts ç§»é™¤ unoptimized
import Image from 'next/image';

<Image
  src="/images/post.webp"
  alt="æè¿°"
  width={800}
  height={400}
  loading="lazy"
  placeholder="blur"
/>
```

**æ–¹æ¡ˆ B - è‡ªå®šä¹‰å“åº”å¼å›¾ç‰‡**ï¼š
```typescript
// components/responsive-image.tsx
interface ResponsiveImageProps {
  src: string;
  alt: string;
  sizes?: string;
}

export function ResponsiveImage({ src, alt, sizes = "100vw" }: ResponsiveImageProps) {
  // ç”Ÿæˆå¤šå°ºå¯¸ URL
  const srcSet = [400, 800, 1200]
    .map(w => `/images/${src}-${w}w.webp ${w}w`)
    .join(', ');
    
  return (
    <img
      src={`/images/${src}-800w.webp`}
      srcSet={srcSet}
      sizes={sizes}
      alt={alt}
      loading="lazy"
      decoding="async"
    />
  );
}
```

**æ–¹æ¡ˆ C - Cloudflare Imagesï¼ˆå¤–éƒ¨ CDNï¼‰**ï¼š
```typescript
// ä½¿ç”¨ Cloudflare å›¾ç‰‡ä¼˜åŒ–æœåŠ¡
const imageUrl = `https://images.yuanshenjian.cn/cdn-cgi/image/width=800,quality=80,format=auto/${path}`;
```

**ä¼˜å…ˆçº§**ï¼šğŸ”´ é«˜

---

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§

#### 5. Bundle å¤§å°ç›‘æ§

**é—®é¢˜æè¿°**ï¼šæ²¡æœ‰æŒç»­ç›‘æ§æ‰“åŒ…ä½“ç§¯ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½é€€åŒ–ã€‚

**å½±å“**ï¼š
- ä¸çŸ¥ä¸è§‰ä¸­ bundle ä½“ç§¯è†¨èƒ€
- é¦–å±åŠ è½½æ—¶é—´å¢åŠ 

**å»ºè®®æ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£… @next/bundle-analyzer
npm install -D @next/bundle-analyzer cross-env

# æ·»åŠ åˆ° package.json scripts
{
  "analyze": "cross-env ANALYZE=true npm run build"
}

# next.config.ts
import withBundleAnalyzer from '@next/bundle-analyzer';

const withAnalyzer = withBundleAnalyzer({
  enabled: process.env.ANALYZE === 'true',
});

export default withAnalyzer(withMDX(nextConfig));
```

**CI é›†æˆå»ºè®®**ï¼š
```yaml
# .github/workflows/bundle-size.yml
- name: Analyze bundle
  run: npm run analyze
  
- name: Upload bundle stats
  uses: actions/upload-artifact@v4
  with:
    name: bundle-stats
    path: .next/analyze/
```

**ä¼˜å…ˆçº§**ï¼šğŸŸ¡ ä¸­

---

#### 6. æµè§ˆå™¨ç¼“å­˜ç­–ç•¥ä¼˜åŒ–

**é—®é¢˜æè¿°**ï¼šé™æ€èµ„æºç¼“å­˜ç­–ç•¥å¯ä»¥æ›´ç²¾ç»†åŒ–ã€‚

**å½±å“**ï¼š
- ç”¨æˆ·é‡å¤è®¿é—®æ—¶ä»éœ€ä¸‹è½½éƒ¨åˆ†èµ„æº
- å¸¦å®½æµªè´¹

**å»ºè®®æ–¹æ¡ˆ**ï¼š
```typescript
// next.config.ts
async headers() {
  return [
    {
      source: '/_next/static/:path*',
      headers: [
        {
          key: 'Cache-Control',
          value: 'public, max-age=31536000, immutable',
        },
      ],
    },
    {
      source: '/images/:path*',
      headers: [
        {
          key: 'Cache-Control',
          value: 'public, max-age=2592000, stale-while-revalidate=86400',
        },
      ],
    },
  ];
}
```

**ä¼˜å…ˆçº§**ï¼šğŸŸ¡ ä¸­

---

#### 7. æœç´¢åŠŸèƒ½ä¼˜åŒ–

**é—®é¢˜æè¿°**ï¼šç›®å‰ä½¿ç”¨å®¢æˆ·ç«¯è¿‡æ»¤ï¼Œæ–‡ç« æ•°é‡å¢åŠ åæ€§èƒ½ä¸‹é™ã€‚

**å½±å“**ï¼š
- å¤§æ•°æ®é‡æ—¶æœç´¢å¡é¡¿
- æ— æ³•å…¨æ–‡æœç´¢å†…å®¹

**å»ºè®®æ–¹æ¡ˆ**ï¼š

**æ–¹æ¡ˆ A - Fuse.js æ¨¡ç³Šæœç´¢ï¼ˆæ¨èï¼‰**ï¼š
```bash
npm install fuse.js
```
```typescript
// lib/search.ts
import Fuse from 'fuse.js';
import { Post } from '@/types/blog';

let fuse: Fuse<Post> | null = null;

export function initSearch(posts: Post[]) {
  fuse = new Fuse(posts, {
    keys: ['title', 'excerpt', 'content', 'tags'],
    threshold: 0.3,
    includeScore: true,
  });
}

export function search(query: string): Post[] {
  if (!fuse) return [];
  return fuse.search(query).map(result => result.item);
}
```

**æ–¹æ¡ˆ B - æ„å»ºæ—¶ç´¢å¼•**ï¼š
```javascript
// scripts/build-search-index.js
// ç”Ÿæˆé™æ€æœç´¢ç´¢å¼•æ–‡ä»¶
// æ”¯æŒ Lunr.js æˆ– FlexSearch
```

**ä¼˜å…ˆçº§**ï¼šğŸŸ¡ ä¸­

---

#### 8. æ–‡ç« åˆ†ç±»/æ ‡ç­¾ç®¡ç†ä¼˜åŒ–

**é—®é¢˜æè¿°**ï¼šåˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†ä¾èµ–æ‰‹åŠ¨ç»´æŠ¤ï¼Œæ²¡æœ‰è‡ªåŠ¨ç»Ÿè®¡ã€‚

**å½±å“**ï¼š
- å®¹æ˜“é—æ¼åˆ†ç±»
- æ ‡ç­¾å‘½åä¸ä¸€è‡´

**å»ºè®®æ–¹æ¡ˆ**ï¼š
```typescript
// scripts/validate-content.ts
import { getAllPosts, getAllTags, getAllCategories } from '../lib/blog';

function validateContent() {
  const posts = getAllPosts();
  const tags = getAllTags();
  const categories = getAllCategories();
  
  // æ£€æŸ¥æœªä½¿ç”¨çš„æ ‡ç­¾
  const usedTags = new Set(posts.flatMap(p => p.tags));
  const orphanedTags = tags.filter(t => !usedTags.has(t));
  
  // æ£€æŸ¥é‡å¤/ç›¸ä¼¼æ ‡ç­¾
  const similarTags = findSimilarTags(tags);
  
  // è¾“å‡ºæŠ¥å‘Š
  console.table({
    æ–‡ç« æ•°: posts.length,
    æ ‡ç­¾æ•°: tags.length,
    åˆ†ç±»æ•°: categories.length,
    æœªä½¿ç”¨æ ‡ç­¾: orphanedTags.length,
  });
}

// æ·»åŠ åˆ° package.json
{
  "validate-content": "ts-node scripts/validate-content.ts"
}
```

**ä¼˜å…ˆçº§**ï¼šğŸŸ¡ ä¸­

---

#### 9. ç¯å¢ƒå˜é‡ç±»å‹å®‰å…¨

**é—®é¢˜æè¿°**ï¼š`process.env` æ²¡æœ‰è¿è¡Œæ—¶éªŒè¯ï¼Œé…ç½®é”™è¯¯å¯èƒ½å¯¼è‡´è¿è¡Œæ—¶é—®é¢˜ã€‚

**å½±å“**ï¼š
- éƒ¨ç½²æ—¶æ‰å‘ç°é…ç½®é”™è¯¯
- ç¼ºå°‘ç±»å‹æç¤º

**å»ºè®®æ–¹æ¡ˆ**ï¼š
```bash
npm install zod
```
```typescript
// lib/env.ts
import { z } from 'zod';

const envSchema = z.object({
  NEXT_PUBLIC_SITE_URL: z.string().url(),
  NEXT_PUBLIC_GISCUS_REPO: z.string().min(1),
  NEXT_PUBLIC_GISCUS_REPO_ID: z.string().startsWith('R_'),
  NEXT_PUBLIC_GISCUS_CATEGORY: z.string().default('General'),
  NEXT_PUBLIC_GISCUS_CATEGORY_ID: z.string().startsWith('DIC_'),
});

export const env = envSchema.parse(process.env);
```

**ä¼˜å…ˆçº§**ï¼šğŸŸ¡ ä¸­

---

### ğŸŸ¢ ä½ä¼˜å…ˆçº§

#### 10. æ·»åŠ æ–‡ç« è‰ç¨¿åŠŸèƒ½

**é—®é¢˜æè¿°**ï¼šè™½ç„¶æœ‰ `published` å­—æ®µï¼Œä½†ç¼ºå°‘è‰ç¨¿ç®¡ç†ç•Œé¢ã€‚

**å½±å“**ï¼š
- ç¼–è¾‘ä½“éªŒä¸å¤Ÿå‹å¥½
- æ— æ³•æœ¬åœ°é¢„è§ˆæœªå‘å¸ƒæ–‡ç« 

**å»ºè®®æ–¹æ¡ˆ**ï¼š
```typescript
// æ–¹æ¡ˆ 1ï¼šæ‰©å±• frontmatter
interface PostFrontmatter {
  status: 'draft' | 'published' | 'archived';
  publishDate?: string;
}

// æ–¹æ¡ˆ 2ï¼šæœ¬åœ°é¢„è§ˆè·¯ç”±
// app/articles/draft/[slug]/page.tsx
// ä»…å¼€å‘ç¯å¢ƒå¯è®¿é—®
```

**ä¼˜å…ˆçº§**ï¼šğŸŸ¢ ä½

---

#### 11. é˜…è¯»æ—¶é—´è®¡ç®—ä¼˜åŒ–

**é—®é¢˜æè¿°**ï¼šç›®å‰æŒ‰å›ºå®šå­—ç¬¦æ•°è®¡ç®—ï¼Œå¯¹ä¸­è‹±æ–‡æ··åˆå†…å®¹ä¸å¤Ÿå‡†ç¡®ã€‚

**å½±å“**ï¼š
- é˜…è¯»æ—¶é—´é¢„ä¼°åå·®

**å»ºè®®æ–¹æ¡ˆ**ï¼š
```typescript
// lib/utils.ts
export function calculateReadingTime(content: string): number {
  // ä¸­æ–‡å­—ç¬¦
  const chineseChars = (content.match(/[\u4e00-\u9fa5]/g) || []).length;
  // è‹±æ–‡å•è¯
  const englishWords = (content.match(/[a-zA-Z]+/g) || []).length;
  // æ•°å­—
  const numbers = (content.match(/\d+/g) || []).length;
  
  const time = 
    chineseChars / 600 +  // ä¸­æ–‡é˜…è¯»é€Ÿåº¦
    englishWords / 200 +  // è‹±æ–‡é˜…è¯»é€Ÿåº¦
    numbers / 300;        // æ•°å­—é˜…è¯»é€Ÿåº¦
    
  return Math.max(1, Math.ceil(time));
}
```

**ä¼˜å…ˆçº§**ï¼šğŸŸ¢ ä½

---

#### 12. æ·»åŠ ç›¸å…³æ–‡ç« æ¨è

**é—®é¢˜æè¿°**ï¼šæ–‡ç« è¯¦æƒ…é¡µç¼ºå°‘ç›¸å…³å†…å®¹æ¨èã€‚

**å½±å“**ï¼š
- ç”¨æˆ·åœç•™æ—¶é—´å¯èƒ½å‡å°‘
- å†…å®¹å‘ç°ä¸å¤Ÿä¾¿æ·

**å»ºè®®æ–¹æ¡ˆ**ï¼š
```typescript
// lib/blog.ts
export function getRelatedPosts(currentPost: Post, limit = 3): Post[] {
  const allPosts = getAllPosts();
  
  return allPosts
    .filter(p => p.slug !== currentPost.slug)
    .map(p => ({
      post: p,
      // è®¡ç®—æ ‡ç­¾ç›¸ä¼¼åº¦
      score: p.tags.filter(tag => currentPost.tags.includes(tag)).length,
    }))
    .sort((a, b) => b.score - a.score)
    .slice(0, limit)
    .map(r => r.post);
}

// åœ¨æ–‡ç« è¯¦æƒ…é¡µå±•ç¤º
// components/related-posts.tsx
```

**ä¼˜å…ˆçº§**ï¼šğŸŸ¢ ä½

---

#### 13. ä»£ç å—å¢å¼º

**é—®é¢˜æè¿°**ï¼šä»£ç å—ç¼ºå°‘å¤åˆ¶æŒ‰é’®ã€æ–‡ä»¶åæ˜¾ç¤ºç­‰åŠŸèƒ½ã€‚

**å½±å“**ï¼š
- ç”¨æˆ·å¤åˆ¶ä»£ç ä¸ä¾¿

**å»ºè®®æ–¹æ¡ˆ**ï¼š
```typescript
// components/enhanced-code-block.tsx
"use client";

import { useState } from 'react';
import { Check, Copy } from 'lucide-react';

interface EnhancedCodeBlockProps {
  code: string;
  language?: string;
  filename?: string;
}

export function EnhancedCodeBlock({ code, language, filename }: EnhancedCodeBlockProps) {
  const [copied, setCopied] = useState(false);
  
  const copyToClipboard = async () => {
    await navigator.clipboard.writeText(code);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };
  
  return (
    <div className="relative group">
      {filename && (
        <div className="flex items-center justify-between px-4 py-2 bg-muted border-b">
          <span className="text-sm text-muted-foreground">{filename}</span>
          {language && (
            <span className="text-xs text-muted-foreground uppercase">{language}</span>
          )}
        </div>
      )}
      <button
        onClick={copyToClipboard}
        className="absolute top-2 right-2 p-2 rounded opacity-0 group-hover:opacity-100 transition-opacity"
        aria-label="å¤åˆ¶ä»£ç "
      >
        {copied ? <Check className="w-4 h-4" /> : <Copy className="w-4 h-4" />}
      </button>
      <pre className="p-4 overflow-x-auto">
        <code>{code}</code>
      </pre>
    </div>
  );
}
```

**ä¼˜å…ˆçº§**ï¼šğŸŸ¢ ä½

---

#### 14. åˆ†æå·¥å…·é›†æˆ

**é—®é¢˜æè¿°**ï¼šç¼ºä¹è®¿é—®æ•°æ®åˆ†æï¼Œæ— æ³•äº†è§£ç”¨æˆ·è¡Œä¸ºã€‚

**å½±å“**ï¼š
- æ— æ³•ä¼˜åŒ–å†…å®¹ç­–ç•¥
- æ— æ³•äº†è§£å—æ¬¢è¿çš„æ–‡ç« 

**å»ºè®®æ–¹æ¡ˆ**ï¼š

**æ–¹æ¡ˆ A - Plausibleï¼ˆéšç§å‹å¥½ï¼‰**ï¼š
```typescript
// app/layout.tsx
<Script
  defer
  data-domain="yuanshenjian.cn"
  src="https://plausible.io/js/script.js"
/>
```

**æ–¹æ¡ˆ B - Google Analytics 4**ï¼š
```typescript
// app/layout.tsx
<Script
  src={`https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`}
  strategy="afterInteractive"
/>
<Script id="google-analytics" strategy="afterInteractive">
  {`
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '${GA_MEASUREMENT_ID}');
  `}
</Script>
```

**ä¼˜å…ˆçº§**ï¼šğŸŸ¢ ä½

---

#### 15. å›½é™…åŒ–ï¼ˆi18nï¼‰å‡†å¤‡

**é—®é¢˜æè¿°**ï¼šç›®å‰ä»…ä¸­æ–‡å†…å®¹ï¼Œæœªæ¥å¯èƒ½éœ€è¦å¤šè¯­è¨€æ”¯æŒã€‚

**å½±å“**ï¼š
- æ‰©å±•å›½é™…å¸‚åœºå—é™

**å»ºè®®æ–¹æ¡ˆ**ï¼š
```bash
npm install next-intl
```
```typescript
// å‡†å¤‡ç¿»è¯‘ç»“æ„
// locales/en.json
{
  "nav": {
    "home": "Home",
    "articles": "Articles",
    "about": "About"
  }
}

// é€æ­¥æ·»åŠ è‹±æ–‡å†…å®¹
// content/blog/en/...
```

**ä¼˜å…ˆçº§**ï¼šğŸŸ¢ ä½

---

## æ€»ä½“è¯„ä»·

### é¡¹ç›®æˆç†Ÿåº¦ï¼š**â­â­â­â­â˜† (8/10)**

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**
1. âœ… **æŠ€æœ¯æ ˆå…ˆè¿›**ï¼šNext.js 15 + React 19 + TypeScript 5ï¼Œç´§è·Ÿç¤¾åŒºå‰æ²¿
2. âœ… **æ¶æ„æ¸…æ™°**ï¼šç›®å½•ç»“æ„åˆç†ï¼ŒèŒè´£åˆ†ç¦»æ˜ç¡®ï¼Œç¬¦åˆç°ä»£å‰ç«¯æœ€ä½³å®è·µ
3. âœ… **ç±»å‹å®‰å…¨**ï¼šTypeScript ä¸¥æ ¼æ¨¡å¼å¯ç”¨ï¼Œç±»å‹å®šä¹‰å®Œæ•´
4. âœ… **æ€§èƒ½ä¼˜ç§€**ï¼šé™æ€å¯¼å‡ºã€ä»£ç åˆ†å‰²ã€Webpack ä¼˜åŒ–ã€PWA æ”¯æŒ
5. âœ… **åŠŸèƒ½å®Œæ•´**ï¼šåšå®¢æ ¸å¿ƒåŠŸèƒ½å®Œå–„ï¼Œç”¨æˆ·ä½“éªŒå‡ºè‰²
6. âœ… **SEO å‹å¥½**ï¼šå®Œå–„çš„å…ƒæ•°æ®ã€Sitemapã€ç»“æ„åŒ–æ•°æ®
7. âœ… **ä»£ç è´¨é‡**ï¼šESLint è§„èŒƒç»Ÿä¸€ï¼Œé”™è¯¯å¤„ç†å®Œå–„
8. âœ… **ç°ä»£åŒ–è®¾è®¡**ï¼šTailwind CSS + CSS å˜é‡ï¼Œæ˜æš—ä¸»é¢˜åˆ‡æ¢

**ä¸»è¦å¾…æå‡é¡¹ï¼š**
1. âš ï¸ **æµ‹è¯•ç¼ºå¤±**ï¼šç¼ºå°‘å•å…ƒæµ‹è¯•å’Œ E2E æµ‹è¯•ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. âš ï¸ **å›¾ç‰‡ä¼˜åŒ–**ï¼šä½¿ç”¨åŸç”Ÿ img æ ‡ç­¾ï¼Œç¼ºå°‘å“åº”å¼å’Œæ‡’åŠ è½½
3. âš ï¸ **æ€§èƒ½ç›‘æ§**ï¼šæ²¡æœ‰ Bundle ç›‘æ§å’Œè¿è¡Œæ—¶æ€§èƒ½ç›‘æ§
4. âš ï¸ **æœç´¢ä¼˜åŒ–**ï¼šå®¢æˆ·ç«¯è¿‡æ»¤åœ¨å¤§æ•°æ®é‡æ—¶æ€§èƒ½ä¸‹é™
5. âš ï¸ **åˆ†æå·¥å…·**ï¼šç¼ºä¹ç”¨æˆ·è¡Œä¸ºæ•°æ®åˆ†æ

### å‘å±•è·¯çº¿å›¾

**Phase 1 - åŸºç¡€å¤¯å®ï¼ˆ1-2 å‘¨ï¼‰**ï¼š
1. æ·»åŠ  Vitest å•å…ƒæµ‹è¯•ï¼ˆç›®æ ‡ 80%+ è¦†ç›–ç‡ï¼‰
2. é…ç½® Playwright E2E æµ‹è¯•ï¼ˆæ ¸å¿ƒç”¨æˆ·æµç¨‹ï¼‰
3. ä¼˜åŒ– `getPostByDateAndSlug` æ€§èƒ½ï¼ˆO(n) â†’ O(1)ï¼‰

**Phase 2 - æ€§èƒ½ä¼˜åŒ–ï¼ˆ2-4 å‘¨ï¼‰**ï¼š
1. å›¾ç‰‡è¿è¡Œæ—¶ä¼˜åŒ–ï¼ˆå“åº”å¼ + æ‡’åŠ è½½ï¼‰
2. Bundle å¤§å°ç›‘æ§ï¼ˆ@next/bundle-analyzerï¼‰
3. æµè§ˆå™¨ç¼“å­˜ç­–ç•¥ä¼˜åŒ–
4. æœç´¢åŠŸèƒ½å¢å¼ºï¼ˆFuse.js æ¨¡ç³Šæœç´¢ï¼‰

**Phase 3 - ä½“éªŒæå‡ï¼ˆ1-2 ä¸ªæœˆï¼‰**ï¼š
1. æ·»åŠ ç›¸å…³æ–‡ç« æ¨è
2. ä»£ç å—å¤åˆ¶åŠŸèƒ½
3. é›†æˆåˆ†æå·¥å…·ï¼ˆPlausible æˆ– GA4ï¼‰
4. æ–‡ç« è‰ç¨¿é¢„è§ˆåŠŸèƒ½

**Phase 4 - é•¿æœŸè§„åˆ’ï¼ˆ3-6 ä¸ªæœˆï¼‰**ï¼š
1. å›½é™…åŒ–æ”¯æŒï¼ˆi18nï¼‰
2. è€ƒè™‘ CMS é›†æˆï¼ˆSanity/Strapiï¼‰
3. é«˜çº§åŠŸèƒ½ï¼ˆå…¨æ–‡æœç´¢ã€é˜…è¯»ç»Ÿè®¡ï¼‰

### æ€»ç»“

è¿™æ˜¯ä¸€ä¸ª**æŠ€æœ¯æ ˆå…ˆè¿›ã€æ¶æ„æ¸…æ™°ã€åŠŸèƒ½å®Œå–„**çš„ä¸ªäººåšå®¢é¡¹ç›®ï¼Œå……åˆ†å±•ç¤ºäº†ä½œè€…ä¼˜ç§€çš„å‰ç«¯å¼€å‘èƒ½åŠ›å’Œå·¥ç¨‹åŒ–æ€ç»´ã€‚é¡¹ç›®é‡‡ç”¨ Next.js 15 + App Router + TypeScript ä¸¥æ ¼æ¨¡å¼ï¼Œåœ¨ç±»å‹å®‰å…¨ã€ç»„ä»¶åŒ–æ¶æ„å’Œæ€§èƒ½ä¼˜åŒ–æ–¹é¢è¡¨ç°å‡ºè‰²ã€‚

å½“å‰æœ€å¤§çš„æ”¹è¿›ç©ºé—´æ˜¯**è¡¥é½æµ‹è¯•è¦†ç›–**ï¼ˆå•å…ƒæµ‹è¯• + E2E æµ‹è¯•ï¼‰ï¼Œè¿™æ˜¯ä¿è¯ä»£ç è´¨é‡å’ŒæŒç»­è¿­ä»£çš„åŸºç¡€ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå›¾ç‰‡ä¼˜åŒ–ã€æœç´¢åŠŸèƒ½å’Œæ•°æ®åˆ†æä¹Ÿæ˜¯å€¼å¾—æŠ•å…¥çš„æ–¹å‘ã€‚

**æ¨èæŒ‡æ•°**ï¼šâ­â­â­â­â­ (5/5) - éå¸¸é€‚åˆä½œä¸ºå­¦ä¹ å’Œå‚è€ƒçš„ Next.js 15 å®æˆ˜é¡¹ç›®

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š2026-02-08*  
*åˆ†æå·¥å…·ï¼šOpenCode Project Analyzer*  
*ä»£ç ç‰ˆæœ¬ï¼šcommit æœ€æ–°*


